import java.util.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;

public class CharacterSelect extends JPanel
{
  static String userName;
  static String character;
  
  public CharacterSelect ()
  {   
    
    try
    {
      BufferedImage image = ImageIO.read(new File("Backgrounds/Character Select.png"));
      JLabel picLabel = new JLabel(new ImageIcon(image));
      add(picLabel);
    }
    catch (IOException e)
    {
    }    
    
    addMouseListener(new MouseAdapter() { 
      public void mousePressed(MouseEvent e) { 
        int relativeX = e.getX();
        int relativeY = e.getY();
        
        if (relativeX >= 341 && relativeX <= 677 && relativeY >= 139 && relativeY <= 227)
        {
          levelChosen = 1;
          getUserName ("Enter Name", "Hello! Please enter your name.", new JFrame ());   
          
        }
        else if (relativeX >= 289 && relativeX <= 634 && relativeY >= 243 && relativeY <= 330)
        {
          levelChosen = 2;
          getUserName ("Enter Name", "Hello! Please enter your name.", new JFrame ());   
        }
        else if (relativeX >= 361 && relativeX <= 685 && relativeY >= 354 && relativeY <= 433) 
        {
          levelChosen = 3;
          getUserName ("Enter Name", "Hello! Please enter your name.", new JFrame ());   
        }
        else
        {
          if (relativeX >= 335 && relativeX <= 627 && relativeY >= 443 && relativeY <= 513)
          {
            Driver.changeScreens("MainMenu");
          }
        }
      } 
    }); 
  }
  
  /**
   * This method creates a dialog window and asks the user to enter their username. 
   * This username is displayed on the ceritificate and on the highscores board.
   * The user can only print the certificate when they reach level 3
   * The ActionListener class inside the method is used in case of a button being pressed. It has the abstract
   * class actionPerformed.
   * <p>
   * <b>Local variables: </b>
   * <p>
   * <b>myDialog</b> This creates an instance of the JDialog class, and is used to ask the user for their name.
   * <p>
   * <b>inputField</b> This creates an instance of the JTextfield class and is used for the user to enter their name in.
   * <p>
   * <b>labelMessage</b> This creates an instance of the JLabel, and is used to tell the user to enter their name.
   * <p>
   * <b>enterName</b> This creates an instance of the JButton class, and is pressed by the user when they have entered
   * their name.
   * 
   * @param title is a String for the JDailog box
   * @param message is a String for the JLabel in the box.
   * @param frame is a JFrame passed in from the driver.
   * 
   * <p>
   * <b>Parameters:</b>
   * <p>
   * e - This points to the ActionEvent class.
   * */  
  public void getUserName(String title, String message, JFrame frame)
  {
    JDialog myDialog = new JDialog (frame, title);
    
    JTextField inputField = new JTextField (20);
    
    JLabel labelMessage = new JLabel (message);
    
    labelMessage.setFont (new Font ("Arial", Font.PLAIN, 16));
    
    myDialog.add (labelMessage);
    
    myDialog.add (inputField);
    
    myDialog.setResizable(false);
    
    myDialog.setSize (500, 100);
    
    myDialog.setLayout (new FlowLayout ());
    
    JButton enterName = new JButton ("Enter");
    
    enterName.addActionListener (new ActionListener ( )
                                   {      
      
      public void actionPerformed (ActionEvent e)
      {
        userName = inputField.getText ();
        if (userName.length() > 0 && userName.length() < 15)
        {          
          myDialog.dispose ();
          frame.dispose();
          activityNum = 0;
          Driver.changeScreens("Levels");
        }
        else
        {
          inputField.setText ("The name must be 1-14 characters.");
        }
      }      
    }                                 
    ) ;   
    
    myDialog.add (enterName);
    
    myDialog.setLocationRelativeTo (frame);
    
    myDialog.setVisible (true);
    
  }
}